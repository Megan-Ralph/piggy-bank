<script>
  $(document).ready(function() {
    var ctx = document.getElementById('transaction-chart').getContext('2d');
    var chart = new Chart(ctx, {
      type: 'bar',
      data: <%= @chart_data.to_json.html_safe %>,
      options: {
        scales: {
          yAxes: [{
            ticks: {
              beginAtZero: true
            }
          }]
        }
      }
    });
  });
</script>

<h1>Transactions</h1>

<table>
  <thead>
    <tr>
      <th>Description</th>
      <th>Amount</th>
    </tr>
  </thead>
  <tbody>
    <% @transactions.each do |transaction| %>
      <tr>
        <td><%= transaction.description %></td>
        <td><%= number_to_currency(transaction.amount) %></td>
      </tr>
    <% end %>
    <tr>
      <td>Total</td>
      <td><%= number_to_currency(@total) %></td>
    </tr>
  </tbody>
</table>

<%= link_to "New", new_transaction_path %>

<canvas id="transaction-chart"></canvas>
